<template>
	<main class="edited-view">
		<h2>üìù –ó–º—ñ–Ω–µ–Ω—ñ –∫—É—Ä—Å–∏ –≤–∞–ª—é—Ç</h2>

		<p v-if="currencies.length === 0">–ù–µ–º–∞—î –∑–º—ñ–Ω–µ–Ω–∏—Ö –≤–∞–ª—é—Ç...</p>

		<!-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CurrenciesList -->
		<CurrenciesList
			v-else
			:currencies="currencies"
			:current-page="currentPage"
			:items-per-page="itemsPerPage"
			@update:current-page="currentPage = $event"
		/>
	</main>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import CurrenciesList from '@/components/CurrenciesList.vue'

// –°—Ç–∞–Ω —Å—Ç–æ—Ä—ñ–Ω–∫–∏
const currencies = ref([])
const currentPage = ref(1)
const itemsPerPage = ref(10)

// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω–µ–Ω–∏—Ö –≤–∞–ª—é—Ç —ñ–∑ localStorage
const STORAGE_KEY_EDITED = 'currency_edited'

onMounted(() => {
	const editedCurrencies =
		JSON.parse(localStorage.getItem(STORAGE_KEY_EDITED)) || {}
	currencies.value = Object.values(editedCurrencies) // –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç —É –º–∞—Å–∏–≤
})
</script>

<style lang="scss" scoped>
.edited-view {
	h2 {
		text-align: center;
		margin-bottom: 1.5rem;
	}

	p {
		text-align: center;
		font-size: 1rem;
		color: #666;
		margin-top: 1rem;
	}
}
</style>
